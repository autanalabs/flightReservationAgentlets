{
  "manifestVersion": "1.1.0",
  "name": "Buscar vuelos",
  "version": "0.1.0",
  "groupId": "com.autanalabs",
  "artifactId": "flight-reservation",
  "tagName": "flight-search",
  "iconURL": "icon.png",
  "description": "Agentlet para capturar y validar criterios de búsqueda de vuelos y sincronizarlos con la conversación.",
  "behavior_prompt": [
    "Actua como un asistente de búsqueda de vuelos.",
    "Campos a solicitar del itinerario: origen, destino, tipo de viaje (ida o ida y vuelta), ",
    "fechas (departureDate y returnDate si aplica), cantidad de pasajeros (adults, children, infants), ",
    "clase (economy, premium_economy, business, first).",
    "Si el usuario proporciona todos los datos, llama a la funcion 'agentlet_setItinerary(itinerario)'.",
    "Si el usuario te pide solo cambiar un campo, llama a la funcion 'agentlet_updateField(campo, valor)'.",
    "Adicionalmente, El usuario puede solicitar desplazar  las fechas adelante o atras N dias.",
    "Adicionalmente, el usuario puede solicitar modificar solo la cantidad de pasajeros para lo cual vas a usar agentlet_setPassengers(objeto_pasajeros).",
    "Puedes obtene el estado completo de la busqueda de vuelos llamando a 'agentlet_getState()'.",
    "Evita texto explicativo innecesario; cuando corresponda, responde sólo con las funciones agentlet_ adecuadas."
  ],
  "tools": [
    {
      "name": "agentlet_setItinerary",
      "description": "Actualiza múltiples criterios de búsqueda de vuelos en una sola llamada.",
      "parameters": {
        "type": "object",
        "properties": {
          "origin": {
            "type": "string",
            "description": "Ciudad/aeropuerto de salida (IATA o texto)"
          },
          "destination": {
            "type": "string",
            "description": "Ciudad/aeropuerto de llegada"
          },
          "departureDate": {
            "type": "string",
            "description": "YYYY-MM-DD",
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
          },
          "returnDate": {
            "type": "string",
            "description": "YYYY-MM-DD (opcional para roundtrip)",
            "pattern": "^\\d{4}-\\d{2}-\\d{2}$"
          },
          "tripType": {
            "type": "string",
            "enum": [
              "oneway",
              "roundtrip"
            ]
          },
          "cabinClass": {
            "type": "string",
            "enum": [
              "economy",
              "premium_economy",
              "business",
              "first"
            ]
          },
          "passengers": {
            "type": "object",
            "properties": {
              "adults": {
                "type": "integer",
                "minimum": 1,
                "maximum": 9
              },
              "children": {
                "type": "integer",
                "minimum": 0,
                "maximum": 9
              },
              "infants": {
                "type": "integer",
                "minimum": 0,
                "maximum": 9
              }
            }
          },
          "nonStopOnly": {
            "type": "boolean"
          },
          "preferredAirlines": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "timeWindows": {
            "type": "object",
            "properties": {
              "depEarliest": {
                "type": "string",
                "description": "HH:MM"
              },
              "depLatest": {
                "type": "string",
                "description": "HH:MM"
              },
              "retEarliest": {
                "type": "string",
                "description": "HH:MM"
              },
              "retLatest": {
                "type": "string",
                "description": "HH:MM"
              }
            }
          },
          "currency": {
            "type": "string",
            "description": "Código ISO 4217"
          }
        },
        "additionalProperties": false
      }
    },
    {
      "name": "agentlet_updateField",
      "description": "Actualiza un solo campo a la vez (atajo para cambios simples).",
      "parameters": {
        "type": "object",
        "properties": {
          "field": {
            "type": "string",
            "enum": [
              "origin",
              "destination",
              "departureDate",
              "returnDate",
              "tripType",
              "cabinClass",
              "nonStopOnly",
              "currency"
            ]
          },
          "value": {}
        },
        "required": [
          "field",
          "value"
        ]
      }
    },
    {
      "name": "agentlet_shiftDates",
      "description": "Desplaza departure/return en días (positivo/negativo).",
      "parameters": {
        "type": "object",
        "properties": {
          "days": {
            "type": "integer",
            "minimum": -365,
            "maximum": 365
          }
        },
        "required": [
          "days"
        ]
      }
    },
    {
      "name": "agentlet_setPassengers",
      "description": "Define pasajeros (adults obligatorio).",
      "parameters": {
        "type": "object",
        "properties": {
          "adults": {
            "type": "integer",
            "minimum": 1,
            "maximum": 9
          },
          "children": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9
          },
          "infants": {
            "type": "integer",
            "minimum": 0,
            "maximum": 9
          }
        },
        "required": [
          "adults"
        ]
      }
    },
    {
      "name": "agentlet_showAgentlet",
      "description": "Pide al Shell mostrar otro agentlet con el estado actual (ej. resultados).",
      "parameters": {
        "type": "object",
        "properties": {
          "agentletName": {
            "type": "string",
            "description": "Nombre del agentlet a mostrar"
          },
          "state": {
            "type": "object",
            "properties": {},
            "description": "Estado completo de los criterios."
          }
        }
      }
    },
    {
      "name": "agentlet_getState",
      "description": "Devuelve el estado completo de los criterios de busqueda de vuelos.",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "agentlet_reset",
      "description": "Reinicia los criterios a valores por defecto (hoy+7 ida, hoy+14 vuelta, 1 adulto, economy, roundtrip).",
      "parameters": {
        "type": "object",
        "properties": {}
      }
    }
  ]
}